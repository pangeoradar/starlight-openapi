---
import type { StarlightOpenAPISchemaConfig } from '../../libs/schema'
import { isSchemaObjectObject, type SchemaObject as SchemaObjectType } from '../../libs/schemaObject'
import Examples, { type Props as ExamplesProps } from '../example/Examples.astro'
import Text from '../Text.astro'

import SchemaObject from './SchemaObject.astro'

interface Props extends ExamplesProps {
  description?: string | undefined
  schema: SchemaObjectType | undefined
  config: StarlightOpenAPISchemaConfig | undefined;
  collapsable?: boolean | undefined;
}

const { collapsable, description, example, examples, schema, config, generate } = Astro.props

// For objects, we want to show the description before the object itself.
const isObject = schema && isSchemaObjectObject(schema)
---
{isObject && <Text>{description}</Text>}
{schema && <SchemaObject isObject={true} schemaObject={schema} hideExample={example !== undefined || examples !== undefined} config={config} />}
{!isObject && <Text>{description}</Text>}
<Examples {example} {examples} {schema} {generate} {collapsable} />
